(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf114a52"],{7984:function(t,s,i){"use strict";i("841c")},"841c":function(t,s,i){},b441:function(t,s,i){"use strict";i("f0e8")},deee:function(t,s,i){"use strict";i.r(s);var e,a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"page docs-view"},[s("div",{staticClass:"view-header"},[s("pageHeader",{attrs:{fullWidth:!0}},[["sheet","axure"].includes(t.type)?s("div",{staticClass:"document-title"},[t._v(t._s(t.documentData.title))]):t._e(),s("div",{staticClass:"inline-block",attrs:{slot:"right-slot"},slot:"right-slot"},[t.isLogined?s("div",{staticClass:"docs-operation inline-block"},[s("documentComBtn",{attrs:{documentId:t.documentData._id,star:t.documentData.starStatus,collect:t.documentData.collectStatus},on:{starCount:t.starCountChange}}),s("span",{staticClass:"cut-line"})],1):t._e()]),s("div",{staticClass:"inline-block",attrs:{slot:"left-slot"},slot:"left-slot"},[["axure"].includes(t.type)?s("div",{staticClass:"paddingL30"},[s("el-button",{attrs:{size:"mini",icon:"el-icon-arrow-left"},on:{click:t.routerGoBack}},[t._v("返回")])],1):t._e()])])],1),!t.loading&&t.hasPermission?s("div",{staticClass:"view-body-wrapper"},["docs"===t.type?s("docsView",{attrs:{author:t.author,document:t.documentData,content:t.documentData.content}}):t._e(),"sheet"===t.type?s("sheetView",{attrs:{author:t.author,document:t.documentData,content:t.documentData.content}}):t._e(),"axure"===t.type?s("axureView",{attrs:{author:t.author,document:t.documentData,content:t.documentData.content}}):t._e()],1):t._e(),t.loading||!t.hasPermission?s("div",{staticClass:"view-body-wrapper"},[t._m(0),t.showNoPermissionTips?s("div",{staticClass:"wa-tips-wrapper"},[s("div",{staticClass:"wa-tips-main"},[t._m(1),s("div",{staticClass:"tips-text-wrapper"},[t._v("\n          "+t._s(t.title||"无访问权限，该文档只对团队内部可见！")+"\n        ")])])]):t._e(),t.showPasswordCheck?s("div",{staticClass:"wa-tips-wrapper"},[s("div",{staticClass:"wa-tips-main"},[t._m(2),s("div",{staticClass:"check-pass-input-wrapper"},[s("div",{staticClass:"check-pass-input"},[s("el-input",{attrs:{placeholder:"输入访问密码","prefix-icon":"el-icon-lock"},model:{value:t.pass,callback:function(s){t.pass=s},expression:"pass"}})],1),s("div",{staticClass:"check-pass-btn"},[s("el-button",{attrs:{type:"primary"},on:{click:t.checkPass}},[t._v("确 认")])],1)])])]):t._e()]):t._e()])},n=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"skeleton-wrapper layout-container"},[s("div",{staticClass:"skeleton-title chiaroscuro"}),s("div",{staticClass:"skeleton-content-item chiaroscuro"}),s("div",{staticClass:"skeleton-content-item chiaroscuro"}),s("div",{staticClass:"skeleton-content-item chiaroscuro"}),s("div",{staticClass:"skeleton-content-item chiaroscuro"}),s("div",{staticClass:"skeleton-title chiaroscuro"}),s("div",{staticClass:"skeleton-content-item chiaroscuro"}),s("div",{staticClass:"skeleton-content-item chiaroscuro"}),s("div",{staticClass:"skeleton-content-item chiaroscuro"}),s("div",{staticClass:"skeleton-title chiaroscuro"}),s("div",{staticClass:"skeleton-content-item chiaroscuro"}),s("div",{staticClass:"skeleton-content-item chiaroscuro"})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"tips-wrapper"},[s("i",{staticClass:"el-icon-warning"})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"check-pass-title"},[s("i",{staticClass:"el-icon-warning"}),t._v("\n          该文档为私密文档，请输入密码\n        ")])}],o=i("bd86"),c=(i("10cb"),i("450d"),i("f3ad")),r=i.n(c),u=(i("7f7f"),i("1951"),i("eedf")),l=i.n(u),d=i("7c0b"),h=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"document-com-btn-wrapper"},[s("li",{class:{active:t.starStatus}},[t.starStatus?s("i",{staticClass:"iconfont icon-dianzan cursor-pointer",on:{click:function(s){return t.starFn(!t.starStatus)}}}):s("i",{staticClass:"iconfont icon-dianzan1 cursor-pointer",on:{click:function(s){return t.starFn(!t.starStatus)}}}),t._v("\n    点赞\n  ")]),s("li",{class:{active:t.collectStatus}},[t.collectStatus?s("i",{staticClass:"iconfont icon-shoucang1 cursor-pointer",on:{click:function(s){return t.collectFn(!t.collectStatus)}}}):s("i",{staticClass:"iconfont icon-shoucang cursor-pointer",on:{click:function(s){return t.collectFn(!t.collectStatus)}}}),t._v("\n    收藏\n  ")])])},p=[],m={name:"document-com-btn",props:{documentId:String,star:Boolean,collect:Boolean},data:function(){return{starStatus:!1,collectStatus:!1}},created:function(){this.starStatus=this.star,this.collectStatus=this.collect},watch:{star:function(t){this.starStatus=t},collect:function(t){this.collectStatus=t}},methods:{starFn:function(t){var s=this;this.$API.starDocument({id:this.documentId,status:!!t}).then((function(){s.starStatus=!!t,t?s.$emit("starCount",1):s.$emit("starCount",-1)}))},collectFn:function(t){var s=this;this.$API.collectDocument({id:this.documentId,status:!!t}).then((function(){s.collectStatus=!!t}))}}},f=m,v=(i("7984"),i("2877")),C=Object(v["a"])(f,h,p,!1,null,"4c5902b3",null),w=C.exports,k=0,_={components:(e={pageHeader:d["a"],documentComBtn:w},Object(o["a"])(e,l.a.name,l.a),Object(o["a"])(e,r.a.name,r.a),Object(o["a"])(e,"docsView",(function(){return Promise.all([i.e("chunk-75e207f5"),i.e("chunk-09fb6001")]).then(i.bind(null,"8145"))})),Object(o["a"])(e,"sheetView",(function(){return Promise.all([i.e("chunk-27742b86"),i.e("chunk-031a2d18")]).then(i.bind(null,"25ed"))})),Object(o["a"])(e,"axureView",(function(){return i.e("chunk-46ab208d").then(i.bind(null,"d684"))})),e),data:function(){return{hasPermission:!1,loading:!0,id:"",type:"",documentData:{},author:{},authority:{edit:!1,needLogin:!0,read:!0,visitType:""},showNoPermissionTips:!1,showPasswordCheck:!1,pass:""}},computed:{isLogined:function(){return this.$store.state.user.access_token}},created:function(){this.id=this.$route.query.id,this.type=this.$route.query.type,this.getData(),k=window.history.length},methods:{getData:function(){var t=this;this.loading=!0,this.$API.getDocumentDetail({id:this.id,isVisit:!0}).then((function(s){var i=s.body;t.documentData=i.document,t.author=i.author,t.authority=i.authority,t.permission(),t.loading=!1}))},permission:function(){this.hasPermission=this.authority.read,this.hasPermission||"private"===this.authority.visitType?this.hasPermission||"private"!==this.authority.visitType||(this.showPasswordCheck=!0):this.showNoPermissionTips=!0},checkPass:function(){var t=this;this.$API.documentCheckPass({documentId:this.documentData._id,pass:this.pass}).then((function(s){s.body?(t.showPasswordCheck=!1,t.hasPermission=!0):t.$message.error("访问密码错误，请重试！")}))},starCountChange:function(t){this.documentData.star_count=this.documentData.star_count+t},routerGoBack:function(){window.history.go(k-window.history.length-1)}}},b=_,y=(i("b441"),Object(v["a"])(b,a,n,!1,null,"7240ffe8",null));s["default"]=y.exports},f0e8:function(t,s,i){}}]);